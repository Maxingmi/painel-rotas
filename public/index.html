<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Painel de Rotas</title>
    <style>
        body { background-color: #1a1a2e; color: #e0e0e0; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; text-align: center; overflow: hidden; }
        #painel-principal { background-color: #16213e; padding: 40px 60px; border-radius: 15px; box-shadow: 0 0 30px rgba(0,0,0,0.5); width: 80%; max-width: 900px; }
        #rota { font-size: 10vw; font-weight: bold; color: #fca311; line-height: 1; }
        #horario { font-size: 5vw; color: #ffffff; margin-top: 15px; }
        #historico { position: absolute; top: 20px; left: 20px; background-color: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px; text-align: left; max-height: 90vh; overflow-y: auto; }
        #historico h3 { margin-top: 0; font-size: 1.5em; color: #fca311; border-bottom: 2px solid #fca311; padding-bottom: 5px; }
        #lista-historico { list-style: none; padding: 0; margin: 0; }
        #lista-historico li { font-size: 1.2em; opacity: 0.7; padding: 5px 0; border-bottom: 1px solid #3a3a5e; }
        #lista-historico li:last-child { border-bottom: none; }
    </style>
</head>
<body>
    <div id="historico">
        <h3>Anunciadas</h3>
        <ul id="lista-historico"></ul>
    </div>
    <div id="painel-principal">
        <div id="rota">--</div>
        <div id="horario">--</div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        const rotaEl = document.getElementById('rota');
        const horarioEl = document.getElementById('horario');
        const listaHistoricoEl = document.getElementById('lista-historico');

        socket.on('atualizar-painel', (dados) => {
            // Atualiza o painel principal
            rotaEl.textContent = dados.proxima.nome;
            horarioEl.textContent = dados.proxima.horario;

            // Limpa e atualiza a lista de histórico
            listaHistoricoEl.innerHTML = '';
            dados.passadas.forEach(rota => {
                const li = document.createElement('li');
                li.textContent = `${rota.horario.replace('Saída às ', '')} - ${rota.nome}`;
                listaHistoricoEl.appendChild(li);
            });
        });
    </script>
</body>
</html>